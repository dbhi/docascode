---
title: "Writing autogenerated documents with Markdown"
description: |
  A detailed analysis of existing tools for automatically generating documents from markup sources
author:
  - name: Unai Martinez-Corral
    url: https://github.com/umarcor
    affiliation: "Digital Electronics Design Group, University of the Basque Country (UPV/EHU)"
    affiliation_url: https://ehu.eus/gded
date: "`r Sys.Date()`"
#date: 'Last updated on [`r system("git log -1 --format=%at | xargs -I{} date -d @{} +%Y/%m/%d", intern=TRUE)`](https://github.com/umarcor/ghdl-cosim/commit/`r system("git rev-parse HEAD", intern=TRUE)`) and generated on `r format(Sys.time(), "%Y/%m/%d")`'
bibliography: refs.bib
output:
  distill::distill_article:
    toc: true
    toc_depth: 4
repository_url: https://github.com/dbhi/mdpaper
citation_url: https://dbhi.github.io/mdpaper
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

**THIS DOCUMENT IS WORK IN PROGRESS. IT IS A COMPENDIUM OF REFERENCES AND THOUGHTS OF THE AUTHOR GIVEN THE ASIMETRIC EXPERIENCE WITH THE DIFFERENT TOOLS. HENCE, USING IT FOR COMPARISON OF TOOLS IS CURRENTLY UNFAIR. PLEASE, TAKE IT WITH A GRAIN OF SALT.**

Engineers, software developers and hardware designers need to write documentation. It might be arguable whether they need to write the docs in their final layout, or some other colleague will take care of enhancing them. Nonetheless, it is undoubtable that only the authors of some project can properly describe the complex features, implementations and motivations. As a result, tens of tools have been proposed to ease the transition from notes/comments written by developers to proper references, tutorials, how-tos, etc. Typically, the workflow starts with writing the docs in some plain text format with some specific markup or decorations. The text is either written in the sources (in software/hardware designs) or anyway distributed using the same workflow as for the codebase. Then, *documentation generator* tools are used to extract the content and convert/manipulate it to some other (typically prettier) format. The chain might include multiple conversions to multiple output formats (say HTML, LaTeX, PDF, EPUB, man pages, etc.).

<aside>
<a
  title="'dbhi/mdpaper' GitHub repository"
  href="https://github.com/dbhi/mdpaper"
><img
  src="https://img.shields.io/github/stars/dbhi/mdpaper?longCache=true&style=flat-square&label=dbhi%2Fmdpaper&logo=github&color=b9b8b7"
  data-external="1"
></a><!--
-->
<a
  title="'build' workflow Status"
  href="https://github.com/dbhi/mdpaper/actions?query=workflow%3Abuild"
><img
  alt="'build' workflow Status"
  src="https://img.shields.io/github/workflow/status/dbhi/mdpaper/build?longCache=true&style=flat-square&logo=github&label=build"
  data-external="1"
></a>
</aside>

In this document it is assumed that the reader is aware of what has been described so far. It is not the purpose of the author to convince the reader about why writing documents using markup languages and source code management (SCM) pays off [@kdheepak15] [@sablonniere17] [@xie17] [@almiray19]. Neither it is to write an introduction to *documentation as code* (Docs-as-Code) or to *documentation generators*. By the same token, how to organize the content and/or which kind of documentation to generate is better discussed in many other references. For instance, [@divio-documentation] [@procida17] is a very interesting approach to organizing docs into *Tutorials*, *How-tos*, *Discussions* and *References*. *Write the Docs* "*is a global community of people who care about documentation*", where learning resources are provided and conferences are organized [@writethedocs].

<aside>
**W** [Comparison of documentation generators](https://en.wikipedia.org/wiki/Comparison_of_documentation_generators), [Lightweight markup language](https://en.wikipedia.org/wiki/Lightweight_markup_language), [Version control](https://en.wikipedia.org/wiki/Version_control)
</aside>

Overall, there are lots of articles about how certain users/groups/projects use some specific tool to generate some specific output format, typically involving not negligible custom (thus, specific) glue logic. Yet, all of them are likely to be feature-limited, mostly because building robust documentation tools does not pay off. It is typically a side project; people need it to have their target achieved, but the documentation system is not a target by itself. It is not until one needs to actually use one of these tools that limitations and unsupported features start to arise. It's software, and everything can be potentially done. But there is frequently a large gap between "can be done" and "it is currently possible to do it".

This document is an analysis of multiple *documentation generators* or *site generators*, focused on telling what is currently possible, easy or difficult to achieve.

# Introduction

Different types of content need distinct features, regardless of the main workflow being common to any documentation product. Hence, what kind of outputs we want/expect to generate needs to be defined first. The author is mainly aiming at disposing a system/workflow that fits four projects: [dbhi](https://github.com/dbhi), [ghdl](https://github.com/ghdl), [VHDL](https://github.com/VHDL) and [VUnit](https://github.com/VUnit). All are projects related to the VHDL language, either in Academia, in the Industry, or in the open source ecosystem in GitHub/GitLab. The following is a list of types of documents generated in such contexts:

- Reference of a CLI tool (written in Python, Golang, Ada, C...).
- Tutorials and how-tos about CLI tools.
- Blog posts.
- Papers/Articles/Chapters, which are gathered in Reports/Books/Proceedings/Memos.
- VHDL libraries and IP.
- VHDL standard.
- Landing site.

Furthermore, on the one hand, most of the documentation is nowadays first read on screens (either a workstation, a laptop or an smartphone). Visualizing documents as web sites allows for dynamic and interactive visualization of data. On the other hand, the most thoughtful and self-contained content is better read outside and offline, thus, in paper. As a result, for any of the content types listed above (except the landing site) we want to generate two output formats, at least: HTML (website) and PDF. Some content fits other formats too, such as man pages or EPUB, but web browsers and paper are a need.

It is to be noted that in this analysis open source tools/projects are considered only. This is because documentation for the target projects is automatically generated and updated using Continuous Integration (CI) services that are public, and mostly based on OCI/Docker containers. Using non-FLOSS tools, although possible, increases the setup and maintenance burden. Moreover, a priori no vendor tool exists which can satisfy the requirement to generate multiple outputs.

Last, but not least, the target is to find or compose a single workflow that suits all the types of documents. As discussed along this document, it is currently possible to generate all of them, using different sets of tools and/or accepting multiple feature limitations. But, asking users (developers) to learn multiple tools and languages providing exactly the same features is inefficient and is, thus, unlikely to succeed. On top of that, it increases the maintenance burden of the documentation system significantly.

# Requirements

In order to find a single workflow that fits all the requirements, those need to be explicitly listed. In this section, requirements are organized in three categories: common/general, for HTML output only, and for PDF output only:

## Common

- Numbered and unnumbered sections
- Bibliography (bibtex)
- Glossary, acronyms, simbols...
- Custom environments
- TOC, list of figures, list of tables...
- Show both "Published" and "Last updated"
- Code listings with syntax highlighting, including importing/including sources
- Cross-references:
  - Headings
  - Figures
  - Tables
  - Equations
  - Code listings
  - Other sites (intersphinx)
- Support splitting sources in multiple documents (include)
- Backrefs for footnotes and cites
- GitHub Markdown
- Multiple versions
- Custom environments
- Real-time collaboration platform/service
- Diagrams
- Waveforms
- Copy code-block
- Internationalization and localization?

## HTML

- View source, history, edit
- Anchored headerings, figures, tables, equations, listings...
- Search
- Light/night theme/style
- Download related PDF, EPUB, man...
- Works on either large (Full HD) or small (smartphones) screens
- Header/footer
- Three column (asides)
- Share on social media
- Shields/badges pointing to the repo, CI services, etc.
- Popup footnotes, cites...
- Icons (either Font Awesome or Material Design Icons)
- Collapse/expand sections, figures, tables, code blocks, etc.
- Dynamic tables.

## PDF

- biblatex/biber support
- Asides
- Support publisher templates (what to do with asides?)

# State of the art

It is to be noted that what can be achieved is not constrained by the markup language only. Some tools and templates extend the capabilities of the standard language, while others miss some of the basic features. As commented above, potentially any markup language can be paired with a tool and a template in order to generate any desired output format. However, we are interested in solutions currently usable off the shelf.

## AsciiDoc | DocBook

AsciiDoc is a document format semantically equivalent to DocBook XML. Hence, the claim is that apart from the default HTML5 output provided by AsciiDoc tools, it is also possible to produce PDF, LaTeX, man pages, e-books, etc. by using DocBook toolchains. AsciiDoc tooling was initially written in Python, but it has been replaced by Asciidoctor, which is written in Ruby. It has built-in converters and templates to produce HTML5, DocBook and man pages. Moreover, it uses Tilt for templating, which allows users to customize the generated output without writing a custom converter. The default HTML5 theme is based on [Foundation](https://foundation.zurb.com/).

<aside>
**W** [AsciiDoc](https://en.wikipedia.org/wiki/AsciiDoc), [DocBook](https://en.wikipedia.org/wiki/DocBook)

- [asciidoc.org](https://asciidoc.org/)
- [asciidoctor.org](https://asciidoctor.org/) ([asciidoctor/asciidoctor](https://github.com/asciidoctor/asciidoctor))
- [rtomayko/tilt](https://github.com/rtomayko/tilt)
</aside>

### Interesting features

Overall, the syntax looks nice, clear and powerful. It is to be noted that a built-in mechanism is provided for defining *blocks* with custom parameters and layout. Those are named *delimited blocks*. That's a powerful mechanism that, at first sight, allows users to extend the markup language and matching templates without having to deal with the backend/generator. That is, no Ruby knowledge is required, a priori, for creating and using custom *delimited block* types.

<aside>
- [asciidoctor.org/docs: Building blocks in AsciiDoc](https://asciidoctor.org/docs/asciidoc-writers-guide/#building-blocks-in-asciidoc)
- [asciidoctor.org/docs: AsciiDoc vs Markdown](https://asciidoctor.org/docs/asciidoc-vs-markdown/)
</aside>

### Drawbacks

Direct PDF generation through [Prawn](https://github.com/prawnpdf/prawn) is supported. Unfortunately, due to the context explained above, LaTeX output is a requirement for the author, and this workflow is not completely explained in the docs. There are brief references to `a2x` (which uses either Apache FOP or `dblatex`) and `asciidoctor-fopub`. Among those, `dblatex` seems the most adequate, because `fopub` requires passing XSL parameters or modifying the XSLT to alter the PDF output. The is also `asciidoctor-latex`, which defines an extended syntax to closely match some LaTeX features (mathematical formulas and environments); it can generate HTML or LaTeX. Still, the first class citizen in AsciiDoc seems to be HTML5 output, and much of the docs are focused on it. Unfortunately, the author did not had time yet for trying the different alternatives for generating LaTeX output. Anyway, ready-to-use templates for journal articles à la [rticles](#rstudio) seem not to be available.

<aside>
- [asciidoctor.org/docs: PDFs](https://asciidoctor.org/docs/user-manual/#pdfs)
- [dblatex.sourceforge.net](http://dblatex.sourceforge.net/)
- [asciidoctor/asciidoctor-fopub](https://github.com/asciidoctor/asciidoctor-fopub)
- [asciidoctor/asciidoctor-latex](https://github.com/asciidoctor/asciidoctor-latex)
</aside>

Regarding templating, multiple HTML themes are available and it seems easy to customize the CSS output. However, the author did not find examples showcasing different templates with a clearly different structure/layout. That is, themes or skins are available, but not templates.

<aside>
- [themes.asciidoctor.org/preview](http://themes.asciidoctor.org/preview/)
- [Produce Custom Themes Using the Asciidoctor Stylesheet Factory](https://asciidoctor.org/docs/produce-custom-themes-using-asciidoctor-stylesheet-factory/)
</aside>

## Doxygen

*TBW*

<aside>
**W** [Doxygen](https://en.wikipedia.org/wiki/Doxygen)
</aside>

## LaTeX

LaTeX (a set of macros for TeX to interpret) is the most known plain text based document preparation system. The ecosystem has been growing and evolving for more than 50 years, and it is very used in Academia as well as for preparation and publication of books that contain complex material. It is the de facto free software standard for high quality typesetting. Traditional output formats are DVI, PostScript or PDF. Although it can be used as an standalone system, it is typically used as an intermediate format. Other tools in this analysis (e.g. DocBook, Pandoc and/or Sphinx), use LaTeX as part of the pipeline for generating PDF.

<aside>
**W** [LaTeX](https://en.wikipedia.org/wiki/LaTeX), [TeX](https://en.wikipedia.org/wiki/TeX), [Device independent file format](https://en.wikipedia.org/wiki/Device_independent_file_format), [PostScript](https://en.wikipedia.org/wiki/PostScript), [PDF](https://en.wikipedia.org/wiki/PDF)

- [latex-project.org](https://www.latex-project.org/)
- [latex3](https://github.com/latex3)
</aside>

### Interesting features

During so many years, several thousand packages have been contributed to Comprehensive TeX Archive Network (CTAN), which cover very general requirements and also very specific features. Support of different languages, character sets, currencies, math, etc. are some of the most known features, along with built-in automatic numbering, cross-referecing, footnotes, list generation, etc. At the same time, [tex.stackexchange.com](https://tex.stackexchange.com/) is a very active and welcoming community where package authors do typically help new users. Furthermore, thanks to drawing capabilities provided by PGF and TikZ, a whole category on their own, programatic generation of complex and very high quality diagrams, plots, etc. is one of the most relevant features. For example, in the context of hardware design, *tikz-timing* package allows to describe waveforms.

<aside>
- [ctan.org](https://www.ctan.org/)
- [ctan.org/pkg/pgf](https://ctan.org/pkg/pgf)
- [ctan.org/pkg/pgf](https://www.ctan.org/pkg/pgf)
- [ctan.org/pkg/tikz-timing](https://ctan.org/pkg/tikz-timing)
- [texample.net/tikz/examples](https://texample.net/tikz/examples/)
</aside>

### Drawbacks

The main limitation of LaTeX is that the whole ecosystem is focused on generating printable documents. Well, actually, documents with very specific page layout requirements. Conversely, in HTML the exact rendering is not specified in the document. As a result, there is no mechanism to nicely browse a LaTeX document as an interactive HTML website. Some very interesting CSS templates exist for generating web sites that feel familiar to LaTeX documents. However, those are not expected to be matched with arbitrary LaTeX sources, but manually written instead.

<aside>
- [texfaq.org: Conversion from (La)TeX to HTML](https://www.texfaq.org/FAQ-LaTeX2HTML)
- [latex.now.sh](https://latex.now.sh/) ([vincentdoerig/latex-css](https://github.com/vincentdoerig/latex-css))
</aside>

A relevant exception is rendering of math equations. MathJax is a well-know open source JavaScript library that provides a display engine for LaTeX, MathML and AsciiMath notation. Almost any other tool in this analysis does use MathJax for displaying LaTeX equations in HTML.

<aside>
**W** [MathJax](https://en.wikipedia.org/wiki/MathJax)

- [mathjax.org](https://www.mathjax.org/) ([mathjax/MathJax](https://github.com/mathjax/MathJax))
</aside>

Another relevant caveat of LaTeX is the fairly steep learning curve. This is probably due to the huge numbers of resources available with partially or apparently overlapping features. On top of that, the archaic, verbose and apparently obscure macro language makes it less appealing than other (markup) languages in this analysis. In fact, that's one of the main motivations to use AsciiDoc/DocBook, Markdown or reStructuredText instead of plain LaTeX.

## MkDocs

*TBW*

<aside>
- [mkdocs.org](https://www.mkdocs.org/) ([mkdocs/mkdocs](https://github.com/mkdocs/mkdocs))
</aside>

## Pandoc

Pandoc is a swiss-army knife (written in Haskell) for markup format conversion which can handle ~40 formats. However, default features available in Markdown are very limited, because Markdown itself is very poorly defined for elaborating complex documents. As a result, multiple plugins or extension have been written to extend both Markdown parsers and generators for certain outputs. One of such extensions is `pandoc-citeproc`, allowing to handle citations and bibliography using CSL stylesheets.

<aside>
**W** [Pandoc](https://en.wikipedia.org/wiki/Pandoc)

- [pandoc.org](https://pandoc.org/) ([jgm/pandoc](https://github.com/jgm/pandoc))
- [jgm/pandoc-citeproc](https://github.com/jgm/pandoc-citeproc)
</aside>

There are many examples putting together pandoc filters to generate PDF and/or HTML output, but using a single specific template/theme for each [@gopinath13] [@kdheepak15] [@mcleod15] [@gallegos16] [@wagler17] [@ogden17]. Sections "*Downside to using Markdown?*" and "*Bending Markdown to your will*" in [@kdheepak15] provide insightful comments; but the most explicit conclusion is shown in the figure of section "*TLDR*":

![[@kdheepak15] Figure 1: Comparing Word, LaTeX and Markdown](img/learningcurve.png)

Hence, assuming that our purpose is to support generating documents with complex custom features, the requirement to learn Haskell feels like a no-go. Nevertheless, it is a very suitable solution for not-so-complex documents, since reusing externally defined LaTeX templates is supported (unlike other tools, such as Sphinx).

### Rmarkdown | RStudio {#rstudio}

Rmarkdown is a package/system written in R to create dynamic analysis documents that combine code, rendered output (such as figures), and prose. It is focused on providing a notebook interface, similar to [jupyter](https://jupyter.org/) in the Python ecosystem. Yet, it uses pandoc under-the-hood to produce multiple output formats including HTML, PDF, Word, slideshows and more.

<aside>
**W** [RStudio](https://en.wikipedia.org/wiki/RStudio), [Project_Jupyter](https://en.wikipedia.org/wiki/Project_Jupyter)

- [rmarkdown.rstudio.com](https://rmarkdown.rstudio.com/) ([rstudio/rmarkdown](https://github.com/rstudio/rmarkdown))
- [rmarkdown.rstudio.com/formats](https://rmarkdown.rstudio.com/formats.html)
</aside>

As with plain pandoc, several users have proposed nice templates for HTML and/or PDF output. However, as explained, in many of these tools implemented features depend not only on the markup language and the engine, but also on the template. This is specially the case with rmarkdown. Although multiple document types can be written and several output formats are supported, in practice each document will likely provide a single valid output.

<aside>
- [One R Markdown Document, Fourteen Demos](https://rstudio.com/resources/rstudioconf-2020/one-r-markdown-document-fourteen-demos/)
- [juba/rmdformats](https://github.com/juba/rmdformats#readthedown-format)
- [svmiller.com: An R Markdown Template for Academic Manuscripts](http://svmiller.com/blog/2016/02/svm-r-markdown-manuscript/)
</aside>

For instance, *rticles* is a repository of 30+ templates to write scientific articles in rmarkdown, as explained in Chapter 13 of [@rmarkdown-definitive]. However, there are no matching HTML templates. Furthermore, some of the existing templates require some features (e.g. cites) to be written in LaTeX. As a result, in most practical cases which use not only most basic features, different rmarkdown sources are required if multiple outputs (PDF and HTML) are to be generated.

<aside>
- [R Markdown: The Definitive Guide | Chapter 13 Journals](https://bookdown.org/yihui/rmarkdown/journals.html)
- [rstudio/rticles: LaTeX Journal Article Templates for R Markdown](https://github.com/rstudio/rticles)
</aside>

Probably the most powerful and, at the same time, limiting feature of rmarkdown is precisely that it is based on R, and R knowledge is required to use it. Precisely, for table and figures to be properly identified as such, `knitr` needs to be used. That is, they need to be dynamically generated in R. Writing the content in plain markdown syntax will have it shown, but not semantically defined as an environment, with a label and a caption.

#### Distill

Opposite to *rticles*, *distill* is a publication format for scientific and technical writing, native to the web^[Precisely, it is the theme/template used in this document.]. That is, it provides some features which are not supported by any matching template for LaTeX/PDF output. Still, it is a very nice looking template/theme, with some interesting and useful features.

<aside>
- [rstudio.github.io/distill](https://rstudio.github.io/distill) ([rstudio/distill](https://github.com/rstudio/distill))
</aside>

Interesting features:

- Header block with authors, affiliations, date and citation (albeit not customizable).
- Autogenerated table of contents (albeit unnumbered).
- LaTeX math, citations and footnotes.
  - Popup footnotes and citations.
- Flexible figure layout options (displaying figures larger than the article text).
- Dynamic tables with support for pagination.
- Support for diagramming tools or JavaScript based interactive visualizations.
- Composition of multiple articles into a website or a blog.
- Asides (albeit on one side only, not supported for LaTeX/PDF, and not well integrated on small screens).
- Nice autogenerated "References" section in the footer, using a BibTeX file (albeit with non-configurable citation style).
- Handy "Corrections" section in the footer (albeit not-customizable).
- Handy "Citation" section in the footer, which shows a BiBTeX source/entry.
- Automatically include metadata compatible with Google Scholar.

Caveats:

- Cannot write a single article in multiple source files. Each article needs to be written in a single file.
- Sections are unnumbered.
- Headers don't have an anchor icon (to easily get a link to that specific header).
- Cannot use Font Awesome icons, unless a `site` is built.
- Asides cannot expand longer than the content they are horizontally tied to.
- There is no option for showing "Last updated", apart from "Published".
- Cannot use markdown in 'Affiliation' for adding multiple links. All the field is linked to a single URL (provided in a separate conf field).
- It seems not possible to customize the citation style. Neither in the metadata, nor the ref or the references list at the end of the document.
- biblatex is not supported.
- The width of the content is too narrow for regular Full HD screens.
  - The width of the *aside* column is also too narrow.
- There is no sidebar, where the TOC might be better located. The TOC is currently shown at the top (only).
- h3 headers look larger than h2 headers.
- Quote font size should be slighly smaller.
- Adding a *banner* image between the subtitle and the author/affiliation metadata would be useful.
- Syntax colouring for code blocks?
- Cannot collapse/expand figures, tables, code blocks, etc.
- Asides are not properly displayed on small screens (smartphones).
- Does not have a search option.
- Does not have an always visible "Go to top" or "Got top ToC" button.

#### Tufte Handouts

Tufte Handouts allows to generate matching HTML and LaTeX/PDF outputs with the style that [Edward Tufte](https://en.wikipedia.org/wiki/Edward_Tufte) uses in his books and handouts. As far as the author is aware, this is the only package/template that provides matching styles for HTML and PDF output.

<aside>
- [rstudio.github.io/tufte](https://rstudio.github.io/tufte/) ([rstudio/tufte](https://github.com/rstudio/tufte))
</aside>

Interesting features:

- Citations and footnotes are shown as asides.
  - Both are nicely collapsed/expanded on small screens.
- Flexible figure layout options (displaying figures larger than the article text).

Caveats:

- Sections are unnumbered.
- Headers don't have an anchor icon (to easily get a link to that specific header).
- There are no affiliation, citation or proper multi-author layout in the header.
- Table of Contents?
  - There is no sidebar, where the TOC might be better located.
- There is no "References" section at the bottom of the HTML output.
- In HTML, it would be desirable to show footnotes and citations as popups, and define asides explicitly.
- Dynamic tables with support for pagination?
- Support for diagramming tools or JavaScript based interactive visualizations?
- Composition of multiple articles into a website or a blog?
- No indication that the article has multiple versions.
  - There is no option for showing "Last updated", apart from "Published".
- Automatically include metadata compatible with Google Scholar?
- Syntax colouring for code blocks?
- Cannot collapse/expand figures, tables, code blocks, etc.
- Does not have a search option.
- Does not have an always visible "Go to top" or "Got top ToC" button.

Overall, Tufte is a very interesting showcase of a single rmarkdown source being used to generate consistent HTML and PDF outputs. However, the style is very opinionated. It would be interesting for Tufte's HTML output to be compatible with *rticles* templates.

#### Bookdown GitBook

Bookdown is an R package that provides a ready-to-use engine to combine multiple rmarkdown documents as chapters of a single publication. It generates HTML, LaTeX/PDF, EPUB and/or Word output. It uses some built-in template(s) for LaTeX that allows to generate documents of type *article* or *report*/*book*. For HTML output, the default style is *GitBook*, based on [gitbook.com](https://www.gitbook.com/).

<aside>
- [bookdown.org](https://bookdown.org/) ([rstudio/bookdown](https://github.com/rstudio/bookdown))
- [bookdown: Authoring Books and Technical Documents with R Markdown](https://bookdown.org/yihui/bookdown/)
</aside>

Bookdown supports some other alternative styles for HTML output. Precisely, there is an style based on [Bootstrap](http://getbootstrap.com/). It is also possible to use the Tufte style. However, other rmarkdown templates need to be specifically adapted for them to be used with bookdown. By the same token, although docs state that *rticles* can be used for bookdown's `pdf_book` output, in practice modifications are required.

<aside>
- [R Markdown: The Definitive Guide | 13.5 Linking with bookdown](https://bookdown.org/yihui/rmarkdown/rticles-bookdown.html)
- [rstudio/distill#152](https://github.com/rstudio/distill/issues/152)
- [umarcor/rticles/actions](https://github.com/umarcor/rticles/actions)
</aside>

Overall, bookdown provides nice default HTML and PDF outputs^[See, for example, [larsasplund.github.io/github-facts](https://larsasplund.github.io/github-facts/)], even though the styles are not particularly matching.

Interesting features:

- The document can be written in multiple rmarkdown sources. However, all of them are appended, there is no `include`/`input`.
- Sections are numbered.
- The table of contents is shown in the sidebar.
- Search is supported.
- LaTeX math, citations and footnotes.
- References can be generated with biblatex and/or using CLS styles. References are shown at the end of each main chapter/section and at the end of the document.
- Supports Font Awesome icons.
- The sidebar is properly handled in small screens.
- In the topbar, the style (font, colour) con be modified, links to the source/history can be shown, links to the corresponding PDF/EPUB/Word can be shown, and links to social networks are supported.

Caveats:

- Buttons in the header use/need JavaScript. It is not possible to right/middle click on them.
- Headers don't have an anchor icon (to easily get a link to that specific header).
- There are no affiliation, citation or proper multi-author layout in the header.
- Asides are not supported.
- In HTML, it would be desirable to show footnotes and citations as popups, and define asides explicitly.
- Dynamic tables with support for pagination?
- Support for diagramming tools or JavaScript based interactive visualizations?
- No built-in indication that the article has multiple versions.
- Automatically include metadata compatible with Google Scholar?
- Syntax colouring for code blocks?
- Cannot collapse/expand figures, tables, code blocks, etc.
- There seems to be no built-in mechanism to combine multiple articles/documents in a single web site.

Summarizing, bookdown's GitBook template provides the best navigation features in the HTML output. It would be useful to have the interesting features available in *distill* or *tufte*.

Regarding the PDF output in bookdown, there is a repository named *thesisdown* where the LaTeX output is customized for 30+ institutions.

<aside>
- [ismayc/thesisdown](https://github.com/ismayc/thesisdown)
</aside>

#### Pagedown

Pagedown is another package for markdown that tries to bypass LaTeX by defining the layout in CSS and relying on web site printing tools to generate PDF. While the approach is interesting, it is not suitable for the types of documents that are the target of this analysis. Precisely, in order to generate an HTML layout that can be printed, all the dynamic features that take advantage of an interactive platform are lost. In practice, the result is similar to generating a PDF only, and then viewing it in a browser. Hence, this generator might be used as a replacement of LaTeX output, but complemented with another HTML output. Trying to use arbitrary outputs with the same rmarkdown source has the caveats explained above.

<aside>
- [rstudio.github.io/pagedown](https://rstudio.github.io/pagedown/) ([rstudio/pagedown](https://github.com/rstudio/pagedown))
</aside>

It is to be noted that this package/workflow is better understood as a trend that expects LaTeX to be *dead* soon. In [@latex-is-dead], the author of pagedown argues that "*it* (LaTeX) *will definitely survive for a few more years (maybe twenty or thirty years), but I believe HTML has much more potential to prosper*". However, at the same time, it is acknowledged that, "*in terms of typesetting, HTML cannot beat LaTeX, but it all depends on how good you want the typesetting to be*". The website of *page.js* is a very illustrative example: while the output is nice and clean, the quality is "just" good enough, and many features are missing as a web site.

<aside>
- [pagedjs.org](https://www.pagedjs.org/)
- [paged.js](https://gitlab.pagedmedia.org/tools/pagedjs)
</aside>

#### Blogdown

Blogdown is an R package that transforms rmarkdown sources into a content structure for Hugo. Hence, it is an interesting solution for R users that want to keep the rmarkdown workflow they are used to, when generating blog sites. However, in the context of this analysis, features are equivalent to the ones offered by Hugo alone. That is multiple HTML templates are available, but generating PDF through LaTeX (or pandoc) is not supported.

<aside>
- [blogdown: Creating Websites with R Markdown](https://bookdown.org/yihui/blogdown/)
- [rstudio/blogdown](https://github.com/rstudio/blogdown)
</aside>

## ReLaXed

ReLaXed is a tool written in JavaScript. The sources of the documents are written in a custom minimal syntax similar to Markdown or LaTeX, supporting typical features such as LaTeX-style mathematical equations (via MathJax), interactive plot/diagram generation through existing JavaScript or CSS frameworks, etc. Examples are really nice looking and modern. Unfortunately, similar to *pagedown* or *paged.js*, this is a very interesting approach to avoid LaTeX, but it is not suitable for the use cases with most complex typesetting requirements.

<aside>
- [RelaxedJS/ReLaXed](https://github.com/RelaxedJS/ReLaXed)
</aside>

This workflow seems to be specially suited for people familiar with web technologies, which know nothing about LaTeX. However, the learning curve for those who need to learn HTML, Pug, CSS and JavaScript doesn't seem to be easier.

## Sphinx

Sphinx is a documentation generator written in Python by the Python community and initially focused on documenting Python projects. It converts reStructuredText files into HTML websites and other formats, such as PDF (through LaTeX), EPUB, texinfo and man. Nonetheless, other markup languages (say Markdown) are supported through *extensions*. Sphinx uses Jinja for HTML templating, which is a text-based engine, inspired by Django templates. Yet, "*the latex builder does not benefit from prepared themes*" [@sphinx-latex]. A limited interface is provided for customization of some LaTeX options and elements, but the template is fixed.

<aside>
**W** [Sphinx (documentation generator)](https://en.wikipedia.org/wiki/Sphinx_(documentation_generator)), [reStructuredText](https://en.wikipedia.org/wiki/ReStructuredText)

- [sphinx-doc.org](https://www.sphinx-doc.org) ([sphinx-doc/sphinx](https://github.com/sphinx-doc/sphinx))
- [jinja.palletsprojects.com](https://jinja.palletsprojects.com/)
- [djangoproject.com](https://www.djangoproject.com/)
</aside>

### Interesting features

The main advantages of Sphinx are powerful cross-reference features supported by *rst*. Unlike Markdown, reStructuredText supports importing/including other sources and referencing the headers across them. Moreover, `sphinx.ext.intersphinx` allows referencing headers/sections in other independently built and published projects, by preserving the same syntax used for internal references. Overall, it is a great fit for distributed ecosystems.

<aside>
- [sphinx-doc.org: Link to other projects’ documentation](https://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html)
</aside>

Moreover, it supports writing blocks of source for some specific output, thus allowing next to each other description of different visualizations of the same data/info.

### Drawbacks

On the one hand, having a fixed LaTeX template makes Sphinx unsuitable for documents that need a pre-defined custom style. At the same time, as in AsciiDoc, multiple HTML themes/skins exist, but most of them feel like cosmetic variations of the same base template. The de facto standard theme [@rtd-theme] was created several years ago, with a framework and a layout/design that are getting outdated (last updated on Jan 2015 [@wyrm]). Moreover, maintainters refuse to support the theme being used outside of the service maintained by themselves. Some nice and more up to date themes exist, but unfortunately not all of them are open source. Thankfully, the communty is reacting and recently a very interesting solution based on Bootstrap was published: Sphinx TYPO3 theme [@typo3].

<aside>
- [sphinx-themes.org](https://sphinx-themes.org/)
- [sphinxthemes.com](https://sphinxthemes.com/)
- [documentation.divio.com](https://documentation.divio.com/) ([evildmp/documentation-system#6](https://github.com/evildmp/documentation-system/issues/6))
</aside>

On the other hand, although arguable, it is a common feeling that reStructuredText is less comfortable to get used to and to remember than Markdown. This is coherent with the fact that Markdown is more feature limited. Nevertheless, this should not be dismissed when approaching writers with different levels of expertise.

Regarding extraction of documentation from sources, Sphinx does a nice job with *docstrings* defined in Python sources. It can navigate the hierarchy of a package/library and generate the documentation for each module, function, parameter, etc. There are language domains for C and C++ too; however support of other languages is quite limited. [sphinxcontrib-vhdldomain](https://github.com/Paebbels/sphinxcontrib-vhdldomain) and [pyVHDLParser](https://github.com/Paebbels/pyVHDLParser) are early work to add a domain for VHDL, as an extension to Sphinx.

<aside>
*W* [Docstring](https://en.wikipedia.org/wiki/Docstring)

- [Sphinx: Domains](https://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html)
- [Sphinx: More domains](https://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html#more-domains)
</aside>

Even though it is possible to write extensions, it's not something that the average user/developer can do easily. It is a low-level API that exposes many of the internals and requires a deep understanding of the tool [@sphinx-todo]. In fact, extensions can be builders written from scratch, roles, directives, markup extensions or hooks, all under the same umbrella.

<aside>
- [Sphinx: Developing extensions for Sphinx](https://www.sphinx-doc.org/en/master/extdev/index.html)
</aside>

With regard to importing Markdown sources, it is supported but feature limited, due to the distinc feature set of the language.

## Static Site Generator (SST)

In the last 5-10 years there has been a trend to migrate web sites from engines with heavy logic to static site generators, thus trading data volume for runtime computation. Static sites are web sites composed of multiple standalone pages that are delivered to the browser exactly as stored, in contrast to dynamic web pages which are generated and typically customized for each user. In-between, static sites with JavaScript can provide some dynamic features, thus blurring the distinction. A term used in this context is Jamstack, which corresponds to JavaScript, APIs, and markup.

<aside>
**W** [Static web page](https://en.wikipedia.org/wiki/Static_web_page)

- [staticsitegenerators.net](https://staticsitegenerators.net/)
- [staticgen.com](https://www.staticgen.com)
- [wiki.python.org: StaticSiteGenerator](https://wiki.python.org/moin/StaticSiteGenerator)
- [jamstack.org](https://jamstack.org/)
</aside>

Nevertheless, it is not the purpose of this document to introduce static site generators. In this analysis, the most relevant issue to underline is that SSTs are primarily meant for generating HTML web sites. As a result, all PDF generation capabilities, if possible, are an afterthought. Typically, PDF outputs are equivalent (if not worse) to the results obtained with *pagedown*, *paged.js* or *ReLaXed*.

Still, there are some SSTs which are worth introducing:

### Golang (Hugo)

*TBW*

<aside>
**W** [Hugo (software](https://en.wikipedia.org/wiki/Hugo_(software))

- [gohugo.io](https://gohugo.io/) ([gohugoio](https://github.com/gohugoio/))
</aside>

- https://gohugo.io//content-management/formats/#list-of-content-formats

### Ruby (Jekyll)

*TBW*

<aside>
**W** [Jekyll (software)](https://en.wikipedia.org/wiki/Jekyll_%28software%29)

- [jekyllrb.com](https://jekyllrb.com/)
</aside>

### JavaScript/TypeScript (Vue, React)

*TBW*

<aside>
- [vuepress.vuejs.org](https://vuepress.vuejs.org)
- [gridsome.org](https://gridsome.org)
- [docusaurus.io](https://docusaurus.io/)
</aside>

## Waveforms

## Real-time collaboration

- [etherpad](https://etherpad.org/)
- [CodiMD: Collaborative markdown notes](https://github.com/codimd)

## Summary and conclusions

The list of supported output formats (as far as the author is aware) is listed in Table \@ref(tab:markuplangs). Note that Static Site Generator (SST) is not a single tool, but it stands for a whole family of projects.

<aside>
If you are familiar with any of the tools and you feel that the information is not correct, please do not hesitate to [create an issue](https://github.com/dbhi/mdpaper/issues/new) or [open a PR](https://github.com/dbhi/mdpaper/compare).
</aside>

```{r markuplangs, tidy=FALSE, echo=FALSE}
mat = matrix(
  c(
    'Static Site Generator', 'AsciiDoc', 'Doxygen', 'MkDocs', 'Pandoc', 'Sphinx',
                      'Yes',      'Yes',     'Yes',    'Yes',    'Yes',    'Yes',
                        '?',      'Yes',     'Yes',      '?',    'Yes',    'Yes',
                        '?',      'Yes',     'Yes',      '?',      '?',    'Yes',
                        '?',        '?',      'No',      '?',    'Yes',    'Yes'
  ),
  nrow=6,
  ncol=5
)
knitr::kable(
  mat,
  align = 'ccccc',
  booktabs = TRUE,
  col.names = c('', 'HTML', 'LaTeX', 'man', 'EPUB'),
  caption = 'Supported output formats in multiple languages/tools.'
)
```

Most projects add custom extensions in the parser, in the generator and in the default template. Hence, it is almost impossible to reuse the same source for multiple tools, or even for multiple templates using the same tool. Potentially, multiple templates could exist which provide the same features as the default, but in practice that is not the case.

<!--
https://commonmark.org/
-->

<!--
At first glance, Doxygen is not designed for applying custom templates to general purpose documents. So, although all the desired output formats are supported, it is not a suitable solution for documents other than the APIs and internals of software projects. Nevertheless, in some use cases it might be feasible to merge output from Doxygen into a larger document/site.

Hence, the list of contestants is: AsciiDoc/DocBook, Pandoc and/or Sphinx.

markdown is NOT a good language, but it is the most used

multine paragraphs in markdown
-->

# Notable missing features

*TBW*

# References

- [scholarlymarkdown.com](http://scholarlymarkdown.com/)
- [vincentdoerig/latex-css: A CSS library that makes your website look like a LaTeX document](https://github.com/vincentdoerig/latex-css)
- [sylvaindeville.net: Writing academic papers in plain text with Markdown and Jupyter notebook](https://sylvaindeville.net/2015/07/17/writing-academic-papers-in-plain-text-with-markdown-and-jupyter-notebook/)
