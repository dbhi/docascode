---
title: "Writing autogenerated documents with Markdown"
description: |
  A detailed analysis of existing tools for automatically generating documents from Markdown sources
author:
  - name: Unai Martinez-Corral
    url: https://github.com/umarcor
    affiliation: "Digital Electronics Design Group, University of the Basque Country (UPV/EHU)"
    affiliation_url: https://ehu.eus/gded
date: "`r Sys.Date()`"
#date: 'Last updated on [`r system("git log -1 --format=%at | xargs -I{} date -d @{} +%Y/%m/%d", intern=TRUE)`](https://github.com/umarcor/ghdl-cosim/commit/`r system("git rev-parse HEAD", intern=TRUE)`) and generated on `r format(Sys.time(), "%Y/%m/%d")`'
bibliography: refs.bib
output:
  distill::distill_article:
    toc: true
    toc_depth: 3
repository_url: https://github.com/dbhi/mdpaper
citation_url: https://dbhi.github.io/mdpaper
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

Engineers, software developers and hardware designers need to write documentation. It might be arguable whether they need to write the docs in their final layout, or some other colleague will take care of enhancing them. Nonetheless, it is undoubtable that only the authors of some project can properly describe the complex features, implementations and motivations. As a result, tens of tools have been proposed to ease the transition from notes/comments written by developers to proper references, tutorials, how-tos, etc. Typically, the workflow starts with writing the docs in some plain text format with some specific markup or decorations. The text is either written in the sources (in software/hardware designs) or anyway distributed using the same workflow as for the codebase. Then, *documentation generator* tools are used to extract the content and convert/manipulate it to some other (typically prettier) format. The chain might include multiple conversions to multiple output formats (say HTML, LaTeX, PDF, EPUB, man pages, etc.).

<aside>
<a
  title="'dbhi/mdpaper' GitHub repository"
  href="https://github.com/dbhi/mdpaper"
><img
  src="https://img.shields.io/github/stars/dbhi/mdpaper?longCache=true&style=flat-square&label=dbhi%2Fmdpaper&logo=github&color=b9b8b7"
  data-external="1"
></a><!--
-->
<a
  title="'build' workflow Status"
  href="https://github.com/dbhi/mdpaper/actions?query=workflow%3Abuild"
><img
  alt="'build' workflow Status"
  src="https://img.shields.io/github/workflow/status/dbhi/mdpaper/build?longCache=true&style=flat-square&logo=github&label=build"
  data-external="1"
></a>
</aside>

In this document it is assumed that the reader is aware of what has been described so far. It is not the purpose of the author to write an introduction to *documentation as code* (Docs-as-Code) or to *documentation generators*. By the same token, how to organize the content and/or which kind of documentation to generate is better discussed in many other references. For instance, [@divio-documentation] [@procida17] is a very interesting approach to organizing docs into *Tutorials*, *How-tos*, *Discussions* and *References*. *Write the Docs* "*is a global community of people who care about documentation*", where learning resources are provided and conferences are organized [@writethedocs].

<aside>
**W** [Comparison of documentation generators](https://en.wikipedia.org/wiki/Comparison_of_documentation_generators), [Lightweight markup language](https://en.wikipedia.org/wiki/Lightweight_markup_language)
</aside>

Overall, there are lots of articles about how certain users/groups/projects use some specific tool to generate some specific output format, typically involving not negligible custom (thus, specific) glue logic. Yet, all of them are likely to be feature-limited, mostly because building robust documentation tools does not pay off. It is typically a side project; people need it to have their target achieved, but the documentation system is not a target by itself. It is not until one needs to actually use one of these tools that limitations and unsupported features start to arise. It's software, and everything can be potentially done. But there is frequently a large gap between "can be done" and "it is currently possible to do it".

This document is an analysis of multiple *documentation generators* or *site generators*, focused on telling what is currently possible, easy or difficult to achieve.

# Introduction

Different types of content need distinct features, regardless of the main workflow being common to any documentation product. Hence, what kind of outputs we want/expect to generate needs to be defined first. The author is mainly aiming at disposing a system/workflow that fits four projects: [dbhi](https://github.com/dbhi), [ghdl](https://github.com/ghdl), [VHDL](https://github.com/VHDL) and [VUnit](https://github.com/VUnit). All are projects related to the VHDL language, either in Academia, in the Industry, or in the open source ecosystem in GitHub/GitLab. The following is a list of types of documents generated in such contexts:

- Reference of a CLI tool (written in Python, Golang, Ada, C...).
- Tutorials and how-tos about CLI tools.
- Blog posts.
- Papers/articles, which are gathered in Books/Proceedings.
- VHDL libraries and IP.
- VHDL standard.
- Landing site.

Furthermore, on the one hand most of the documentation is nowadays first read in a screen (either a workstation, a laptop or an smartphone). On the other hand, the most thoughtful and self-contained content is better read outside and offline, thus, in paper. As a result, for any of the content types listed above (except the landing site) we want to generate two output formats, at least: HTML (website) and PDF. Some content fits other formats too, such as man pages or EPUB, but web browsers and paper are a need.

It is to be noted that in this analysis open source tools/projects are considered only. This is because documentation for the target projects is automatically generated and updated using Continuous Integration (CI) services that are public, and mostly based on OCI/Docker containers. Using non-FLOSS tools, although possible, increases the setup and maintenance burden.

Last, but not least, the target is to find or compose a single workflow that suits all the types of documents. As discussed along this document, it is currently possible to generate all of them, using different sets of tools and/or accepting multiple feature limitations. But, asking users (developers) to learn multiple tools that provide exactly the same features is inefficient and is, thus, unlikely to succeed. On top of that, it increases the maintenance burden of the documentation system significantly.

# Requirements

In order to find a single workflow that fits all the requirements, those need to be explicitly listed. In this section, requirements are organized in three categories: common/general, for HTML output only, and for PDF output only:

## Common

- Numbered and unnumbered sections
- Bibliography (bibtex)
- Glossary, acronyms, simbols...
- TOC, list of figures, list of tables...
- Show both "Published" and "Last updated"
- Code listings with syntax highlighting, including importing/including sources
- Cross-references:
  - Headings
  - Figures
  - Tables
  - Equations
  - Code listings
  - Other sites (intersphinx)
- Support splitting sources in multiple documents (include)
- Backrefs for footnotes and cites
- GitHub Markdown
- Multiple versions
- Custom environments
- Real-time collaboration platform/service
- Diagrams
- Waveforms
- Copy code-block
- Internationalization and localization?

## HTML

- View source, history, edit
- Anchored headerings, figures, tables, equations, listings...
- Search
- Light/night theme/style
- Download related PDF, EPUB, man...
- Works on either large (Full HD) or small (smartphones) screens
- Header/footer
- Three column (asides)
- Share on social media
- Shields/badges pointing to the repo, CI services, etc.
- Popup footnotes, cites...
- Icons (either Font Awesome or Material Design Icons)
- Collapse/expand sections, figures, tables, code blocks, etc.
- Dynamic tables.

## PDF

- biblatex/biber support
- Asides
- Support publisher templates (what to do with asides?)

# State of the art

It is to be noted that what can be achieved is not constrained by the markup language only. Some tools and templates extend the capabilities of the standard language, while others miss some of the basic features. As commented above, potentially any markup language can be paired with a tool and a template in order to generate any desired output format. However, we are interested in solutions currently usable off the shelf.

## AsciiDoc / DocBook

*TBW*

<aside>
**W** [AsciiDoc](https://en.wikipedia.org/wiki/AsciiDoc), [DocBook](https://en.wikipedia.org/wiki/DocBook)

- [asciidoc.org](https://asciidoc.org/)
- [asciidoctor.org](https://asciidoctor.org/) ([asciidoctor/asciidoctor](https://github.com/asciidoctor/asciidoctor))
</aside>

## Doxygen

*TBW*

<aside>
**W** [Doxygen](https://en.wikipedia.org/wiki/Doxygen)
</aside>

## MkDocs

*TBW*

<aside>
- [mkdocs.org](https://www.mkdocs.org/) ([mkdocs/mkdocs](https://github.com/mkdocs/mkdocs))
</aside>

## Pandoc

*TBW*

<aside>
**W** [Pandoc](https://en.wikipedia.org/wiki/Pandoc)

- [pandoc.org](https://pandoc.org/) ([jgm/pandoc](https://github.com/jgm/pandoc))
</aside>

### R / Rmarkdown / RStudio

- https://rmarkdown.rstudio.com/formats.html
  - https://github.com/juba/rmdformats#readthedown-format
  - [rstudio/rticles: LaTeX Journal Article Templates for R Markdown](https://github.com/rstudio/rticles)
    - https://github.com/umarcor/rticles/actions
- [bookdown.org](https://bookdown.org/)
  - [bookdown.org/yihui/rmarkdown](https://bookdown.org/yihui/rmarkdown/)
    - [bookdown.org/yihui/rmarkdown/journals](https://bookdown.org/yihui/rmarkdown/journals.html)
  - [bookdown.org/yihui/bookdown](https://bookdown.org/yihui/bookdown/)
  - [bookdown.org/rdpeng/rprogdatascience](https://bookdown.org/rdpeng/rprogdatascience/)
- [svmiller.com: An R Markdown Template for Academic Manuscripts](http://svmiller.com/blog/2016/02/svm-r-markdown-manuscript/)

<!--
Tables/Figures need to be added with knitr.
-->

#### Distill

Distill is a publication format for scientific and technical writing, native to the web.
Learn more about using Distill for R Markdown at <https://rstudio.github.io/distill>.

Interesting features:

- https://rstudio.github.io/distill/citations.html#google-scholar

Caveats:

- Cannot use markdown in 'Affiliation' to add multiple links. All the field is linked to a single URL (provided in a separate conf field).
- There is not option so show "Last updated", apart from "Published".
- It seems not possible to customize the citation style. Neither in the metadata, nor the ref or the references list at the end of the document.
- biblatex is not supported.
- The width of the content is too narrow for regular Full HD screens.
  - The width of the *aside* column is also too narrow.
- There is no sidebar, where the TOC might be better located. The TOC is currently shown at the top (only).
- Cannot add a *banner* image between the subtitle and the author/affiliation metadata.
- Sections are unnumbered.
- Asides cannot expand longer than the content they are horizontally tied to.
- Cannot use Font Awesome icons, unless a `site` is built.
- Headers don't have an anchor icon (to easily get a link to that specific header).
- Quote font size should be slighly smaller.
- h3 headers look larger than h2 headers.
- Syntax colouring for code blocks?
- Cannot collapse/expand figures, tables, code blocks, etc.
- Asides are not properly displayed in small screens (smartphones).
- Does not have a search option.

#### Bookdown GitBook

- Buttons use/need JavaScript. It is not possible to right/middle click on the buttons.

## Sphinx

*TBW*

<aside>
**W** [Sphinx (documentation generator)](https://en.wikipedia.org/wiki/Sphinx_(documentation_generator))

- [sphinx-doc.org](https://www.sphinx-doc.org) ([sphinx-doc/sphinx](https://github.com/sphinx-doc/sphinx))
</aside>

- [sphinx-themes.org](https://sphinx-themes.org/)
- [sphinxthemes.com](https://sphinxthemes.com/)
- [documentation.divio.com](https://documentation.divio.com/) ([evildmp/documentation-system#6](https://github.com/evildmp/documentation-system/issues/6))

## Static Site Generator (SST)

- https://jamstack.org/

<aside>
**W** [Static web page](https://en.wikipedia.org/wiki/Static_web_page)

- [staticsitegenerators.net](https://staticsitegenerators.net/)
- [staticgen.com](https://www.staticgen.com)
- [wiki.python.org: StaticSiteGenerator](https://wiki.python.org/moin/StaticSiteGenerator)
</aside>

### Hugo

*TBW*

<aside>
**W** [Hugo (software](https://en.wikipedia.org/wiki/Hugo_(software))

- [gohugo.io](https://gohugo.io/) ([gohugoio](https://github.com/gohugoio/))
</aside>

### Jekyll

*TBW*

<aside>
**W** [Jekyll (software)](https://en.wikipedia.org/wiki/Jekyll_%28software%29)

- [jekyllrb.com](https://jekyllrb.com/)
</aside>

### Vue

- https://vuepress.vuejs.org
- https://gridsome.org

## Summary and conclusions

The list of supported output formats (as far as the author is aware) is listed in Table \@ref(tab:markuplangs). Note that Static Site Generator (SST) is not a single tool, but it stands for a whole family of projects.

<aside>
If you are familiar with any of the tools and you feel that the information is not correct, please do not hesitate to [create an issue](https://github.com/dbhi/mdpaper/issues/new) or [open a PR](https://github.com/dbhi/mdpaper/compare).
</aside>

```{r markuplangs, tidy=FALSE, echo=FALSE}
mat = matrix(
  c(
    'Static Site Generator', 'AsciiDoc', 'Doxygen', 'MkDocs', 'Pandoc', 'Sphinx',
                      'Yes',      'Yes',     'Yes',    'Yes',    'Yes',    'Yes',
                        '?',      'Yes',     'Yes',      '?',    'Yes',    'Yes',
                        '?',      'Yes',     'Yes',      '?',      '?',    'Yes',
                        '?',        '?',      'No',      '?',    'Yes',    'Yes'
  ),
  nrow=6,
  ncol=5
)
knitr::kable(
  mat,
  align = 'ccccc',
  booktabs = TRUE,
  col.names = c('', 'HTML', 'LaTeX', 'man', 'EPUB'),
  caption = 'Supported output formats in multiple languages/tools.'
)
```

<!--
https://commonmark.org/
-->

<!--
At first glance, Doxygen is not designed for applying custom templates to general purpose documents. So, although all the desired output formats are supported, it is not a suitable solution for documents other than the APIs and internals of software projects. Nevertheless, in some use cases it might be feasible to merge output from Doxygen into a larger document/site.

Hence, the list of contestants is: AsciiDoc/DocBook, Pandoc and/or Sphinx.

markdown is NOT a good language, but it is the most used

multine paragraphs in markdown
-->

# Notable missing features

*TBW*

# References

- [kdheepak/blog](https://github.com/kdheepak/blog)
  - [blog.kdheepak.com/writing-papers-with-markdown](https://blog.kdheepak.com/writing-papers-with-markdown.html)
- [How to make a scientific looking PDF from markdown (with bibliography)](https://gist.github.com/maxogden/97190db73ac19fc6c1d9beee1a6e4fc8)
- [scholarlymarkdown.com](http://scholarlymarkdown.com/)
- [vincentdoerig/latex-css: A CSS library that makes your website look like a LaTeX document](https://github.com/vincentdoerig/latex-css)
- IEEE template
  - [claymcleod/pandoc-academic-publication: Simple markup to produce academic publications using Pandoc](https://github.com/claymcleod/pandoc-academic-publication)
  - [vrthra/markdown-ieee-pdf: A skeletal project to convert a paper written in markdown format to IEEE style paper submission in pdf](https://github.com/vrthra/markdown-ieee-pdf)
  - [stsewd/ieee-pandoc-template: IEEE paper template for pandoc](https://github.com/stsewd/ieee-pandoc-template)
- [sylvaindeville.net: Writing academic papers in plain text with Markdown and Jupyter notebook](https://sylvaindeville.net/2015/07/17/writing-academic-papers-in-plain-text-with-markdown-and-jupyter-notebook/)
- [CodiMD: Collaborative markdown notes](https://github.com/codimd)
